<!--
CLAW default configuration. This file should not be edited!
For more information about the configuration file and its extension, please
refer to the developer's guide
-->
<claw version="1.0">
  <!-- Global transformation parameters -->
  <global type="root">
    <!-- Define the translator to be used. -->
    <parameter key="translator" value="claw.wani.x2t.translator.ClawTranslator" />

    <!-- Default general values -->
    <parameter key="default_target" value="gpu" />
    <parameter key="default_directive" value="openacc" />

    <!-- OpenACC default information -->
    <!--
      Define the default values to be used for the clauses.
      If value set to 0, compiler default value used.
      - openacc_vector_length -> vector_length(128)
      - openacc_num_gangs -> num_gangs(8)
      - openacc_num_workers -> num_workers(8)
    -->
    <parameter key="openacc_vector_length" value="128" />
    <parameter key="openacc_num_gangs" value="8" />
    <parameter key="openacc_num_workers" value="8" />
    <!--
      Specify the order of generation of clauses when nested loops are generated
      possible values are vector_gang, gang_vector, vector, gang, none
    -->
    <parameter key="openacc_execution_mode" value="gang_vector" />
    <!--
      Data strategy influence how CLAW generates data region with parallelize
      directive.
      - present: in/out arrays are present on GPU in parallelized subroutine.
      - kernel: data region is generated by parallelized kernel (subroutine).
                arrays are created in the kernel and data are move to/from
                device at the beginning/end of the subroutine.
      - none: no data region generated.
    -->
    <parameter key="openacc_data_strategy" value="present" />
    <!--
      Local array strategy influence how CLAW handle the local arrays in
      parallelized subroutine.
      - private: Privatize local arrays if needed.
      - promote: Promote the array instead of making them private if needed.
    -->
    <parameter key="openacc_local_strategy" value="private" />

    <!--
      Collapse loops when possible (!$claw nodep)
      - false: collapse clause is not used.
      - true: collapse clause is used when possible.
    -->
    <parameter key="openacc_collapse" value="false" />

    <!-- OpenMP default information -->
    <!--
      Define the default values to be used for the clauses.
      If value set to 0, compiler default value used.
      - openmp_num_teams -> num_teams(65536)
      - openmp_num_threads -> num_threads(256)
      - openmp_scheduler_chunk_size -> scheduler_chunk_size(256)
    -->
    <parameter key="openmp_num_teams" value="65536" />
    <parameter key="openmp_num_threads" value="256" />
    <parameter key="openmp_scheduler_chunk_size" value="256" />
    <!--
      Specify the order of generation of clauses when nested loops are generated
      possible values are teams_distribute, teams_distribute_simd, teams_distribute_parallel_do, teams_distribute_parallel_do_simd, none
    -->
    <parameter key="openmp_execution_mode" value="teams_distribute" />
    <!--
      Data strategy influence how CLAW generates data region with parallelize
      directive.
      - present: in/out arrays are present on GPU in parallelized subroutine.
      - kernel: data region is generated by parallelized kernel (subroutine).
                arrays are created in the kernel and data are move to/from
                device at the beginning/end of the subroutine.
      - none: no data region generated.
    -->
    <parameter key="openmp_data_strategy" value="present" />
    <!--
      Local array strategy influence how CLAW handle the local arrays in
      parallelized subroutine.
      - private: Privatize local arrays if needed.
      - promote: Promote the array instead of making them private if needed.
    -->
    <parameter key="openmp_local_strategy" value="private" />

    <!--
      Collapse loops when possible (!$claw nodep)
      - false: collapse clause is not used.
      - true: collapse clause is used when possible.
    -->
    <parameter key="openmp_collapse" value="false" />
  </global>

  <!-- Transformation sets -->
  <sets>
    <set name="claw-internal-set" />
    <set name="claw-low-level-set" />
    <set name="claw-high-level-set" />
  </sets>

  <!-- Transformation groups and order -->
  <groups>
    <!-- Low-level transformations -->
    <group name="remove" />
    <group name="directive-primitive" />
    <group name="array-transform" />
    <group name="loop-extract" />
    <group name="loop-hoist" />
    <group name="loop-fusion" />
    <group name="loop-interchange" />
    <group name="on-the-fly" />
    <group name="kcache" />
    <group name="if-extract" />
    <!-- High-level transformations -->
    <group name="parallelize" />
    <group name="parallelize-forward" />
    <!-- internal applied at the end -->
    <group name="openacc-continuation" />
  </groups>
</claw>
